{% if predictor %}

  {% set badgeClass = '' %}
  {% switch predictor.level %}
  {% case 'VERY_HIGH' %}
    {% set badgeClass = 'expanded-predictor-badge--very-high' %}
  {% case 'HIGH' %}
    {% set badgeClass = 'expanded-predictor-badge--high' %}
  {% case 'MEDIUM' %}
    {% set badgeClass = 'expanded-predictor-badge--medium' %}
  {% case 'LOW' %}
    {% set badgeClass = 'expanded-predictor-badge--low' %}
  {% default %}
    {% set badgeClass = 'expanded-predictor-badge--default' %}
  {% endswitch %}

  {% set staticOrDynamicClass = 'predictor-badge__static_or_dynamic' %}
  {% if showScore and predictor.level in ['VERY_HIGH', 'MEDIUM'] and predictor.staticOrDynamic === 'DYNAMIC' %}
    {% set staticOrDynamicClass = staticOrDynamicClass + ' predictor-badge__wrapped_static_or_dynamic' %}
  {% endif %}

  {% if fixedWidth or fixedWidth is undefined %}
    {% set badgeWidthClass = 'expanded-predictor-badge__fixed-width' %}
  {% else %}
    {% set badgeWidthClass = 'expanded-predictor-badge__dynamic' %}
  {% endif %}

  {% if predictor.level is undefined or (showScore == true and predictor.score is undefined) %}
    {% set band = 'UNKNOWN' %}
    {% set badgeClass = 'expanded-predictor-badge--default' %}
  {% else %}
    {% set band = predictor.level | replace('_', ' ') %}
  {% endif %}

  <div class="{{ badgeClass }} {{ badgeWidthClass }}">
    <span
      class="predictor-badge__type">{{ predictor.type }}</span>

    <div class="predictor-badge__stats">
      <span class="predictor-badge__level">{{ band }}</span>

      {% if showScore and predictor.score and badgeClass != 'expanded-predictor-badge--default' %}
        <span class="predictor-badge__score">{{ predictor.score }}%</span>
      {% endif %}

      {% if predictor.staticOrDynamic and badgeClass != 'expanded-predictor-badge--default' %}
        <span class="{{ staticOrDynamicClass }}">{{ predictor.staticOrDynamic | capitalize }}</span>
      {% endif %}

    </div>

    <span class="predictor-badge__last_updated">Last updated: {{ predictor.completedDate }}</span>

  </div>
{% endif %}
